# Migration `20200210033401-add-comment-model`

This migration has been generated by fastspeeed at 2/10/2020, 3:34:01 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_CityRecord" (
    "city" TEXT NOT NULL  ,
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "confirmedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "curedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCountY" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "suspectedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT,
FOREIGN KEY ("city") REFERENCES "City"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT,
FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

INSERT INTO "new_CityRecord" ("city","confirmedCount","country","createdAt","curedCount","deadCount","id","province","recordAt","sourceUrl","suspectedCount","updatedAt","virus") SELECT "city","confirmedCount","country","createdAt","curedCount","deadCount","id","province","recordAt","sourceUrl","suspectedCount","updatedAt","virus" from "CityRecord"

DROP TABLE "quaint"."CityRecord";

ALTER TABLE "quaint"."new_CityRecord" RENAME TO "CityRecord";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200210033106-add-comment-model..20200210033401-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:new.db"
 }
 model User {
   avatar    Boolean  @default(false)
@@ -110,5 +110,9 @@
   city           City
   country        Country
   province       Province
   virus          VirusInfo
+  suspectedCountY Int @default(0)
+  curedCountY Int @default(0)
+  deadCountY Int @default(0)
+  confirmedCountY Int @default(0)
 }
```


