# Migration `20200210033106-add-comment-model`

This migration has been generated by fastspeeed at 2/10/2020, 3:31:06 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."User" (
    "avatar" BOOLEAN NOT NULL DEFAULT false ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "email" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "name" TEXT   ,
    "nickname" TEXT NOT NULL DEFAULT '' ,
    "password" TEXT NOT NULL DEFAULT '' ,
    "role" TEXT NOT NULL DEFAULT 'USER' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Province" (
    "country" TEXT NOT NULL  ,
    "id" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

CREATE TABLE "quaint"."City" (
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT
) 

CREATE TABLE "quaint"."Area" (
    "city" TEXT NOT NULL  ,
    "id" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("city") REFERENCES "City"("id") ON DELETE RESTRICT
) 

CREATE TABLE "quaint"."VirusInfo" (
    "description" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Country" (
    "continents" TEXT   ,
    "id" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."CountryRecord" (
    "confirmedAddCount" INTEGER   ,
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "continents" TEXT   ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedAddCount" INTEGER   ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadAddCount" INTEGER   ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "seriousAddCount" INTEGER   ,
    "seriousCount" INTEGER   ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedAddCount" INTEGER   ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT,
FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

CREATE TABLE "quaint"."ProvinceRecord" (
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT,
FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

CREATE TABLE "quaint"."CityRecord" (
    "city" TEXT NOT NULL  ,
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT,
FOREIGN KEY ("city") REFERENCES "City"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT,
FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")

CREATE UNIQUE INDEX "quaint"."User.name" ON "User"("name")

CREATE UNIQUE INDEX "quaint"."User.nickname" ON "User"("nickname")

CREATE UNIQUE INDEX "quaint"."Province.title" ON "Province"("title")

CREATE UNIQUE INDEX "quaint"."VirusInfo.title" ON "VirusInfo"("title")

CREATE UNIQUE INDEX "quaint"."Country.title" ON "Country"("title")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200210033106-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,114 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "sqlite"
+  url      = "file:new.db"
+}
+
+model User {
+  avatar    Boolean  @default(false)
+  createdAt DateTime
+  email     String   @default("") @unique
+  id        String   @id
+  name      String?  @unique
+  nickname  String   @default("") @unique
+  password  String   @default("")
+  role      String   @default("USER")
+  updatedAt DateTime
+}
+
+model Province {
+  id              String           @id
+  title           String           @default("") @unique
+  country         Country
+  cities          City[]
+  provinceRecords ProvinceRecord[] @relation(references: [province])
+  cityRecords     CityRecord[]
+}
+
+model City {
+  id          String       @id
+  title       String       @default("")
+  province    Province
+  areas       Area[]
+  cityRecords CityRecord[] @relation(references: [city])
+}
+
+model Area {
+  id    String @id
+  title String @default("")
+  city  City
+}
+
+model VirusInfo {
+  description     String           @default("")
+  id              String           @id
+  title           String           @default("") @unique
+  countryRecords  CountryRecord[]
+  provinceRecords ProvinceRecord[]
+  cityRecords     CityRecord[]
+}
+
+model Country {
+  continents      String?
+  id              String           @id
+  title           String           @default("") @unique
+  provinces       Province[]       @relation(references: [country])
+  countryRecords  CountryRecord[]  @relation(references: [country])
+  provinceRecords ProvinceRecord[] @relation(references: [country])
+  cityRecords     CityRecord[]
+}
+
+model CountryRecord {
+  confirmedAddCount Int?
+  confirmedCount    Int       @default(0)
+  continents        String?
+  createdAt         DateTime
+  curedAddCount     Int?
+  curedCount        Int       @default(0)
+  deadAddCount      Int?
+  deadCount         Int       @default(0)
+  id                String    @id
+  recordAt          DateTime
+  seriousAddCount   Int?
+  seriousCount      Int?
+  sourceUrl         String    @default("")
+  suspectedAddCount Int?
+  suspectedCount    Int       @default(0)
+  updatedAt         DateTime
+  country           Country
+  virus             VirusInfo
+}
+
+model ProvinceRecord {
+  confirmedCount Int       @default(0)
+  createdAt      DateTime
+  curedCount     Int       @default(0)
+  deadCount      Int       @default(0)
+  id             String    @id
+  recordAt       DateTime
+  sourceUrl      String    @default("")
+  suspectedCount Int       @default(0)
+  updatedAt      DateTime
+  country        Country
+  province       Province
+  virus          VirusInfo
+}
+
+model CityRecord {
+  confirmedCount Int       @default(0)
+  createdAt      DateTime
+  curedCount     Int       @default(0)
+  deadCount      Int       @default(0)
+  id             String    @id
+  recordAt       DateTime
+  sourceUrl      String    @default("")
+  suspectedCount Int       @default(0)
+  updatedAt      DateTime
+  city           City
+  country        Country
+  province       Province
+  virus          VirusInfo
+}
```


