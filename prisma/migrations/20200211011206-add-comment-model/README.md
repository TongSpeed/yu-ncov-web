# Migration `20200211011206-add-comment-model`

This migration has been generated by fastspeeed@gmail.com at 2/11/2020, 1:12:06 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Province" (
    "country" TEXT NOT NULL  ,
    "cuid" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "tags" TEXT NOT NULL DEFAULT '' ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_Province" ("country", "id", "title") SELECT "country", "id", "title" FROM "quaint"."Province"

DROP TABLE "quaint"."Province";

ALTER TABLE "quaint"."new_Province" RENAME TO "Province";

CREATE UNIQUE INDEX "quaint"."Province.title" ON "Province"("title")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_City" (
    "cuid" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "tags" TEXT NOT NULL DEFAULT '' ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_City" ("id", "province", "title") SELECT "id", "province", "title" FROM "quaint"."City"

DROP TABLE "quaint"."City";

ALTER TABLE "quaint"."new_City" RENAME TO "City";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Area" (
    "city" TEXT NOT NULL  ,
    "cuid" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "tags" TEXT NOT NULL DEFAULT '' ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("city") REFERENCES "City"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_Area" ("city", "id", "title") SELECT "city", "id", "title" FROM "quaint"."Area"

DROP TABLE "quaint"."Area";

ALTER TABLE "quaint"."new_Area" RENAME TO "Area";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Country" (
    "continents" TEXT   ,
    "cuid" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "tags" TEXT NOT NULL DEFAULT '' ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

INSERT INTO "quaint"."new_Country" ("continents", "id", "title") SELECT "continents", "id", "title" FROM "quaint"."Country"

DROP TABLE "quaint"."Country";

ALTER TABLE "quaint"."new_Country" RENAME TO "Country";

CREATE UNIQUE INDEX "quaint"."Country.title" ON "Country"("title")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200210044846-add-comment-model..20200211011206-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:new.db"
   default  = true
 }
 generator client {
@@ -14,70 +14,79 @@
   ADMIN
 }
 model User {
-  id                  String        @default(cuid()) @id
-  email               String        @unique
-  name                String?       @unique
-  nickname            String        @unique
-  password            String
-  avatar              Boolean       @default(false)
-  role                Role          @default(USER)
-  createdAt           DateTime      @default(now())
-  updatedAt           DateTime      @updatedAt
+  id        String   @default(cuid()) @id
+  email     String   @unique
+  name      String?  @unique
+  nickname  String   @unique
+  password  String
+  avatar    Boolean  @default(false)
+  role      Role     @default(USER)
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
 model Country {
-  id       String     @default(cuid()) @id
-  title    String     @unique
+  id         String     @default(cuid()) @id
+  title      String     @unique
   continents String?
-  provinces Province[]
+  provinces  Province[]
+  cuid       String     @default(cuid())
+  tags       String
 }
 model Province {
   id      String  @default(cuid()) @id
   title   String  @unique
   country Country
   cities  City[]
+  cuid    String  @default(cuid())
+  tags    String
 }
 model City {
   id       String   @default(cuid()) @id
-  title    String   
+  title    String
   province Province
-  areas  Area[]
+  cuid     String   @default(cuid())
+  tags     String
+
 }
 model Area {
   id    String @default(cuid()) @id
-  title String 
+  title String
   city  City
+  cuid  String @default(cuid())
+  tags  String
 }
 model VirusInfo {
   id          String @default(cuid()) @id
   title       String @unique
   description String
 }
+
 model CountryRecord {
-  id             String    @default(cuid()) @id
-  country        Country
-  continents String?
-  virus          VirusInfo
-  sourceUrl      String
-  suspectedCount Int
-  confirmedCount Int
-  curedCount     Int
-  deadCount      Int
-  seriousCount   Int?
+  id                String    @default(cuid()) @id
+  country           Country
+  continents        String?
+  virus             VirusInfo
+  sourceUrl         String
+  suspectedCount    Int
+  confirmedCount    Int
+  curedCount        Int
+  deadCount         Int
+  seriousCount      Int?
   suspectedAddCount Int?
   confirmedAddCount Int?
   curedAddCount     Int?
   deadAddCount      Int?
   seriousAddCount   Int?
-  recordAt       DateTime  
-  createdAt      DateTime  @default(now())
-  updatedAt      DateTime  @updatedAt
+  recordAt          DateTime
+  createdAt         DateTime  @default(now())
+  updatedAt         DateTime  @updatedAt
 }
 model ProvinceRecord {
@@ -90,11 +99,11 @@
   confirmedCount Int
   curedCount     Int
   deadCount      Int
-  recordAt       DateTime  
-  createdAt      DateTime  @default(now())
-  updatedAt      DateTime  @updatedAt
+  recordAt  DateTime
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
@@ -108,10 +117,10 @@
   suspectedCount Int
   confirmedCount Int
   curedCount     Int
   deadCount      Int
-  recordAt       DateTime  
+  recordAt       DateTime
   createdAt      DateTime  @default(now())
   updatedAt      DateTime  @updatedAt
- 
+
 }
```


