# Migration `20200213135846-add-comment-model`

This migration has been generated by fastspeeed@gmail.com at 2/13/2020, 1:58:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `yu_ncov_sql`.`Area` (
    `city` varchar(191) NOT NULL ,
    `cuid` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `tags` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`City` (
    `cuid` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `province` varchar(191) NOT NULL ,
    `tags` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`CityRecord` (
    `city` varchar(191) NOT NULL ,
    `confirmedCount` int NOT NULL DEFAULT 0 ,
    `country` varchar(191) NOT NULL ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `curedCount` int NOT NULL DEFAULT 0 ,
    `deadCount` int NOT NULL DEFAULT 0 ,
    `id` varchar(191) NOT NULL  ,
    `province` varchar(191) NOT NULL ,
    `recordAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `sourceUrl` varchar(191) NOT NULL DEFAULT '' ,
    `suspectedCount` int NOT NULL DEFAULT 0 ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `virus` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`Country` (
    `continents` varchar(191)   ,
    `cuid` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `tags` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`CountryRecord` (
    `confirmedAddCount` int   ,
    `confirmedCount` int NOT NULL DEFAULT 0 ,
    `continents` varchar(191)   ,
    `country` varchar(191) NOT NULL ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `curedAddCount` int   ,
    `curedCount` int NOT NULL DEFAULT 0 ,
    `deadAddCount` int   ,
    `deadCount` int NOT NULL DEFAULT 0 ,
    `id` varchar(191) NOT NULL  ,
    `recordAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `seriousAddCount` int   ,
    `seriousCount` int   ,
    `sourceUrl` varchar(191) NOT NULL DEFAULT '' ,
    `suspectedAddCount` int   ,
    `suspectedCount` int NOT NULL DEFAULT 0 ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `virus` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`News` (
    `content` varchar(191) NOT NULL DEFAULT '' ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `infoSource` varchar(191) NOT NULL DEFAULT '' ,
    `province` varchar(191) NOT NULL DEFAULT '' ,
    `recordAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `sourceUrl` varchar(191) NOT NULL DEFAULT '' ,
    `subTitle` varchar(191)   ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`Province` (
    `country` varchar(191) NOT NULL ,
    `cuid` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `tags` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`ProvinceRecord` (
    `confirmedCount` int NOT NULL DEFAULT 0 ,
    `country` varchar(191) NOT NULL ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `curedCount` int NOT NULL DEFAULT 0 ,
    `deadCount` int NOT NULL DEFAULT 0 ,
    `id` varchar(191) NOT NULL  ,
    `province` varchar(191) NOT NULL ,
    `recordAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `sourceUrl` varchar(191) NOT NULL DEFAULT '' ,
    `suspectedCount` int NOT NULL DEFAULT 0 ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `virus` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`Rumor` (
    `content` varchar(191) NOT NULL DEFAULT '' ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `recordAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `subTitle` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`User` (
    `avatar` boolean NOT NULL DEFAULT false ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `email` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `name` varchar(191)   ,
    `nickname` varchar(191) NOT NULL DEFAULT '' ,
    `password` varchar(191) NOT NULL DEFAULT '' ,
    `role` varchar(191) NOT NULL DEFAULT 'USER' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `yu_ncov_sql`.`VirusInfo` (
    `description` varchar(191) NOT NULL DEFAULT '' ,
    `id` varchar(191) NOT NULL  ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE UNIQUE INDEX `User.email` ON `yu_ncov_sql`.`User`(`email`)

ALTER TABLE `yu_ncov_sql`.`Area` ADD FOREIGN KEY (`city`) REFERENCES `yu_ncov_sql`.`City`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`City` ADD FOREIGN KEY (`province`) REFERENCES `yu_ncov_sql`.`Province`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CityRecord` ADD FOREIGN KEY (`city`) REFERENCES `yu_ncov_sql`.`City`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CityRecord` ADD FOREIGN KEY (`country`) REFERENCES `yu_ncov_sql`.`Country`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CityRecord` ADD FOREIGN KEY (`province`) REFERENCES `yu_ncov_sql`.`Province`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CityRecord` ADD FOREIGN KEY (`virus`) REFERENCES `yu_ncov_sql`.`VirusInfo`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CountryRecord` ADD FOREIGN KEY (`country`) REFERENCES `yu_ncov_sql`.`Country`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`CountryRecord` ADD FOREIGN KEY (`virus`) REFERENCES `yu_ncov_sql`.`VirusInfo`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`Province` ADD FOREIGN KEY (`country`) REFERENCES `yu_ncov_sql`.`Country`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`ProvinceRecord` ADD FOREIGN KEY (`country`) REFERENCES `yu_ncov_sql`.`Country`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`ProvinceRecord` ADD FOREIGN KEY (`province`) REFERENCES `yu_ncov_sql`.`Province`(`id`) ON DELETE RESTRICT

ALTER TABLE `yu_ncov_sql`.`ProvinceRecord` ADD FOREIGN KEY (`virus`) REFERENCES `yu_ncov_sql`.`VirusInfo`(`id`) ON DELETE RESTRICT
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200213135846-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,145 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "mysql"
+  url      = "mysql://root:1@localhost:3306/yu_ncov_sql"
+}
+
+model Area {
+  cuid  String @default("")
+  id    String @id
+  tags  String @default("")
+  title String @default("")
+  city  City
+}
+
+model City {
+  cuid        String       @default("")
+  id          String       @id
+  tags        String       @default("")
+  title       String       @default("")
+  province    Province
+  areas       Area[]
+  cityRecords CityRecord[] @relation(references: [city])
+}
+
+model CityRecord {
+  confirmedCount Int       @default(0)
+  createdAt      DateTime
+  curedCount     Int       @default(0)
+  deadCount      Int       @default(0)
+  id             String    @id
+  recordAt       DateTime
+  sourceUrl      String
+  suspectedCount Int       @default(0)
+  updatedAt      DateTime
+  city           City
+  country        Country
+  province       Province
+  virus          VirusInfo
+}
+
+model Country {
+  continents      String?
+  cuid            String           @default("")
+  id              String           @id
+  tags            String           @default("")
+  title           String           @default("")
+  cityRecords     CityRecord[]
+  countryRecords  CountryRecord[]  @relation(references: [country])
+  provinces       Province[]       @relation(references: [country])
+  provinceRecords ProvinceRecord[] @relation(references: [country])
+}
+
+model CountryRecord {
+  confirmedAddCount Int?
+  confirmedCount    Int       @default(0)
+  continents        String?
+  createdAt         DateTime
+  curedAddCount     Int?
+  curedCount        Int       @default(0)
+  deadAddCount      Int?
+  deadCount         Int       @default(0)
+  id                String    @id
+  recordAt          DateTime
+  seriousAddCount   Int?
+  seriousCount      Int?
+  sourceUrl         String
+  suspectedAddCount Int?
+  suspectedCount    Int       @default(0)
+  updatedAt         DateTime
+  country           Country
+  virus             VirusInfo
+}
+
+model News {
+  content    String
+  createdAt  DateTime
+  id         String   @id
+  infoSource String   @default("")
+  province   String   @default("")
+  recordAt   DateTime
+  sourceUrl  String
+  subTitle   String?
+  title      String
+  updatedAt  DateTime
+}
+
+model Province {
+  cuid            String           @default("")
+  id              String           @id
+  tags            String           @default("")
+  title           String           @default("")
+  country         Country
+  cities          City[]
+  cityRecords     CityRecord[]
+  provinceRecords ProvinceRecord[] @relation(references: [province])
+}
+
+model ProvinceRecord {
+  confirmedCount Int       @default(0)
+  createdAt      DateTime
+  curedCount     Int       @default(0)
+  deadCount      Int       @default(0)
+  id             String    @id
+  recordAt       DateTime
+  sourceUrl      String    @default("")
+  suspectedCount Int       @default(0)
+  updatedAt      DateTime
+  country        Country
+  province       Province
+  virus          VirusInfo
+}
+
+model Rumor {
+  content   String
+  createdAt DateTime
+  id        String   @id
+  recordAt  DateTime
+  subTitle  String
+  title     String
+  updatedAt DateTime
+}
+
+model User {
+  avatar    Boolean  @default(false)
+  createdAt DateTime
+  email     String   @default("") @unique
+  id        String   @id
+  name      String?
+  nickname  String   @default("")
+  password  String   @default("")
+  role      String   @default("USER")
+  updatedAt DateTime
+}
+
+model VirusInfo {
+  description     String
+  id              String           @id
+  title           String           @default("")
+  cityRecords     CityRecord[]
+  countryRecords  CountryRecord[]
+  provinceRecords ProvinceRecord[]
+}
```


