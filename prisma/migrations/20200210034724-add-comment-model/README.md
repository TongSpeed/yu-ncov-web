# Migration `20200210034724-add-comment-model`

This migration has been generated by fastspeeed at 2/10/2020, 3:47:24 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Province" (
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "confirmedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "curedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCountY" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "suspectedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT
) 

INSERT INTO "new_Province" ("confirmedCount","confirmedCountY","country","curedCount","curedCountY","deadCount","deadCountY","id","suspectedCount","suspectedCountY","title") SELECT "confirmedCount","confirmedCountY","country","curedCount","curedCountY","deadCount","deadCountY","id","suspectedCount","suspectedCountY","title" from "Province"

DROP TABLE "quaint"."Province";

ALTER TABLE "quaint"."new_Province" RENAME TO "Province";

CREATE UNIQUE INDEX "quaint"."Province.title" ON "Province"("title")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_City" (
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "confirmedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "curedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCountY" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "suspectedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT
) 

INSERT INTO "new_City" ("confirmedCount","confirmedCountY","curedCount","curedCountY","deadCount","deadCountY","id","province","suspectedCount","suspectedCountY","title") SELECT "confirmedCount","confirmedCountY","curedCount","curedCountY","deadCount","deadCountY","id","province","suspectedCount","suspectedCountY","title" from "City"

DROP TABLE "quaint"."City";

ALTER TABLE "quaint"."new_City" RENAME TO "City";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Country" (
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "confirmedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "continents" TEXT   ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "curedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCountY" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "suspectedCountY" INTEGER NOT NULL DEFAULT 0 ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

INSERT INTO "new_Country" ("confirmedCount","confirmedCountY","continents","curedCount","curedCountY","deadCount","deadCountY","id","suspectedCount","suspectedCountY","title") SELECT "confirmedCount","confirmedCountY","continents","curedCount","curedCountY","deadCount","deadCountY","id","suspectedCount","suspectedCountY","title" from "Country"

DROP TABLE "quaint"."Country";

ALTER TABLE "quaint"."new_Country" RENAME TO "Country";

CREATE UNIQUE INDEX "quaint"."Country.title" ON "Country"("title")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200210033512-add-comment-model..20200210034724-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:new.db"
 }
 model User {
   avatar    Boolean  @default(false)
@@ -34,8 +34,9 @@
   suspectedCountY Int @default(0)
   curedCountY Int @default(0)
   deadCountY Int @default(0)
   confirmedCountY Int @default(0)
+  recordAt          DateTime
 }
 model City {
   id          String       @id
@@ -51,8 +52,9 @@
   suspectedCountY Int @default(0)
   curedCountY Int @default(0)
   deadCountY Int @default(0)
   confirmedCountY Int @default(0)
+  recordAt          DateTime
 }
 model Area {
   id    String @id
@@ -84,8 +86,9 @@
   suspectedCountY Int @default(0)
   curedCountY Int @default(0)
   deadCountY Int @default(0)
   confirmedCountY Int @default(0)
+  recordAt          DateTime
 }
 model CountryRecord {
   confirmedAddCount Int?
```


